(()=>{"use strict";var e={388:(e,t,a)=>{let n=function(e){return e.LOG_VERSION="Log Version",e.LOGGED_IN_PLAYER="Logged In Player",e.BOOSTED_LEVELS="Boosted Levels",e.PLAYER_EQUIPMENT="Player Equipment",e.DEATH="Death",e.TARGET_CHANGE="Target Change",e.DAMAGE="Damage",e.PLAYER_ATTACK_ANIMATION="Attack Animation",e}({});let r=function(e){return e[e.BLOCK_ME=12]="BLOCK_ME",e[e.DAMAGE_ME=16]="DAMAGE_ME",e[e.DAMAGE_ME_CYAN=18]="DAMAGE_ME_CYAN",e[e.DAMAGE_ME_ORANGE=20]="DAMAGE_ME_ORANGE",e[e.DAMAGE_ME_YELLOW=22]="DAMAGE_ME_YELLOW",e[e.DAMAGE_ME_WHITE=24]="DAMAGE_ME_WHITE",e[e.SPLASH_ME=69]="SPLASH_ME",e}({}),o=function(e){return e[e.DAMAGE_MAX_ME=43]="DAMAGE_MAX_ME",e[e.DAMAGE_MAX_ME_CYAN=44]="DAMAGE_MAX_ME_CYAN",e[e.DAMAGE_MAX_ME_ORANGE=45]="DAMAGE_MAX_ME_ORANGE",e[e.DAMAGE_MAX_ME_YELLOW=46]="DAMAGE_MAX_ME_YELLOW",e[e.DAMAGE_MAX_ME_WHITE=47]="DAMAGE_MAX_ME_WHITE",e}({});var i=a(3380),s=a.n(i);const c=["Scurrius","Kree'arra","Commander Zilyana","General Graardor","K'ril Tsutsaroth","Nex","Kalphite Queen","Sarachnis","Scorpia","Abyssal Sire","Kraken","Dagannoth Rex","Dagannoth Supreme","Dagannoth Prime","The Leviathan","The Whisperer","Vardorvis","Duke Sucellus","Tekton","Ice demon","Vanguard","Vespula","Vasa Nistirio","Muttadile","Great Olm","The Maiden of Sugadinti","Pestilent Bloat","Nylocas Vasilias","Sotetseg","Xarpus","Verzik Vitur","Ba-Ba","Akkha","Akkha's Shadow","Kephri","Zebak","Obelisk","Tumeken's Warden","Ahrim the Blighted","Dharok the Wretched","Guthan the Infested","Karil the Tainted","Torag the Corrupted","Verac the Defiled","Corporeal Beast","King Black Dragon","Vorkath","Zulrah","Fragment of Seren","Alchemical Hydra","Bryophyta","Callisto","Cerberus","Chaos Elemental","Chaos Fanatic","Crazy Archaeologist","Crystalline Hunllef","Corrupted Hunllef","Deranged Archaeologist","Giant Mole","Hespori","The Mimic","The Nightmare","Obor","Phantom Muspah","Skotizo","Thermonuclear Smoke Devil","TzKal-Zuk","TzTok-Jad","Venenatis","Vet'ion"];function l(e){return Object.values(r).includes(e.hitsplatName)||Object.values(o).includes(e.hitsplatName)||"BLOCK_ME"===e.hitsplatName}function m(e,t){return t.target===e&&c.includes(t.source)}const E=e=>{const t=".*",a="[^\\t]*",r=new RegExp("^(".concat("\\d{2}-\\d{2}-\\d{4}",") (").concat("\\d{2}:\\d{2}:\\d{2}\\.\\d{3}",") (").concat("\\w+",")\t(").concat(t,")"));let o=e.match(r);if(!o)return console.error("Invalid log line format:",e),null;const[,i,s,c,l]=o,m=new RegExp("Log Version (".concat(t,")"));if(o=l.match(m),o){const[,e]=o;return console.log("Log Version ".concat(e)),{type:n.LOG_VERSION,date:i,time:s,timezone:c,logVersion:e}}const E=new RegExp("Logged in player is (".concat(t,")"));if(o=l.match(E),o){const[,e]=o;return{type:n.LOGGED_IN_PLAYER,date:i,time:s,timezone:c,loggedInPlayer:e}}const g=new RegExp("Boosted levels are \\[(\\d+), (\\d+), (\\d+), (\\d+), (\\d+), (\\d+), (\\d+)\\]");if(o=l.match(g),o){const[,e,t,a,r,l,m,E]=o.map(Number);return{type:n.BOOSTED_LEVELS,date:i,time:s,timezone:c,boostedLevels:{attack:e,strength:t,defence:a,ranged:r,magic:l,hitpoints:m,prayer:E}}}const u=new RegExp("Player equipment is (".concat(t,")"));if(o=l.match(u),o){const[,e]=o,t=JSON.parse(e).map((e=>e.toString()));return{type:n.PLAYER_EQUIPMENT,date:i,time:s,timezone:c,playerEquipment:t}}const d=new RegExp("^(".concat(t,") dies"));if(o=l.match(d),o){const[,e]=o;return{type:n.DEATH,date:i,time:s,timezone:c,target:e}}const p=new RegExp("^(".concat(t,") changes target to (").concat(t,")"));if(o=l.match(p),o){const[,e,t]=o;return{type:n.TARGET_CHANGE,date:i,time:s,timezone:c,source:e,target:t}}const A=new RegExp("Player attack animation\t(".concat(a,")\t(").concat(a,")"));if(o=l.match(A),o){const[,e,t]=o;return{type:n.PLAYER_ATTACK_ANIMATION,date:i,time:s,timezone:c,animationId:parseInt(e,10),target:t}}const h=new RegExp("^(".concat(a,")\t(").concat(a,")\t(").concat(a,")"));if(o=l.match(h),!o)return console.error("Invalid log line format:",e),null;const[,M,f,_]=o;return{type:n.DAMAGE,date:i,time:s,timezone:c,target:M,hitsplatName:f,damageAmount:parseInt(_,10)}};function g(e,t){try{const a=e.split("\n");let r=0,o=[];for(const e of a){const n=E(e.trim());if(n&&o.push(n),r++,t&&r%200===0){t(r/a.length*50)}}let i=function(e,t){const a=e.length;let r=0;const o=[];let i,E,g,u=null,d="",p=null;function A(e,t){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];u.lastLine=e,u.metaData={date:u.firstLine.date,fightLengthMs:u.lastLine.fightTimeMs-u.firstLine.fightTimeMs,name:u.name,success:t,time:u.firstLine.time},o.push(u),a&&(u=null),p=null}for(const M of e){if(M.type===n.LOGGED_IN_PLAYER&&(d=M.loggedInPlayer),M.type===n.BOOSTED_LEVELS&&(i=M.boostedLevels),M.type===n.PLAYER_EQUIPMENT&&(E=M.playerEquipment),u&&p&&s()("".concat(M.date," ").concat(M.time),"MM-DD-YYYY HH:mm:ss.SSS").toDate().getTime()-p.time>6e4&&(u.data=u.data.filter(((e,t)=>t<=p.index)),u.name+=" - Incomplete",A(u.data[u.data.length-1],!1)),!u&&(M.type===n.DAMAGE&&l(M)&&M.target!==d||M.type===n.TARGET_CHANGE&&m(d,M))){g=s()("".concat(M.date," ").concat(M.time),"MM-DD-YYYY HH:mm:ss.SSS").toDate(),M.fightTimeMs=0;const e=[];i&&e.push({type:n.BOOSTED_LEVELS,date:M.date,time:M.time,timezone:M.timezone,boostedLevels:i,fightTimeMs:0}),E&&e.push({type:n.PLAYER_EQUIPMENT,date:M.date,time:M.time,timezone:M.timezone,playerEquipment:E,fightTimeMs:0}),u={name:M.target,enemies:[M.target],data:[...e,M],loggedInPlayer:d,firstLine:M,lastLine:M}}else if(u){"target"in M&&c.includes(M.target)&&u.name!==M.target&&(u.name=M.target),M.type===n.DAMAGE&&l(M)&&M.target!==d&&!u.enemies.includes(M.target)&&u.enemies.push(M.target);const e=s()("".concat(M.date," ").concat(M.time),"MM-DD-YYYY HH:mm:ss.SSS").toDate();M.fightTimeMs=e.getTime()-g.getTime(),u.data.push(M)}u&&M.type===n.DAMAGE&&l(M)&&(p={time:s()("".concat(M.date," ").concat(M.time),"MM-DD-YYYY HH:mm:ss.SSS").toDate().getTime(),index:u.data.length-1}),M.type===n.DEATH&&M.target&&u&&(M.target===u.name?A(M,!0):M.target===u.loggedInPlayer&&A(M,!1)),r++,t&&r%200===0&&t(50+r/a*50)}u&&A(u.data[u.data.length-1],!1,!1);const h=new Map;return o.filter((e=>{if(!e.data.some((e=>e.type===n.DAMAGE&&l(e))))return!1;let t=1;return h.has(e.name)&&(t=h.get(e.name)+1),h.set(e.name,t),e.name="".concat(e.name," - ").concat(t),!0}))}(o,t);return i}catch(a){return console.error("Error parsing file content:",a),null}}var u=a(340);const d=a.n(u)().createInstance({name:"myFightData"});onmessage=e=>{const{type:t,fileContent:a,index:n}=e.data;"parse"===t?function(e){const t=g(e,(e=>{postMessage({type:"progress",progress:e})})),a={fightMetadata:(null===t||void 0===t?void 0:t.map((e=>e.metaData)))||[],firstResult:t[0]};postMessage({type:"parseResult",parseResultMessage:a}),d.setItem("fightData",t)}(a):"getItem"===t&&function(e){d.getItem("fightData").then((t=>t&&e>=0&&e<t.length?t[e]:null)).then((e=>{postMessage({type:"item",item:e})})).catch((e=>{console.error("Error getting specific item:",e)}))}(n)}}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=e,a.x=()=>{var e=a.O(void 0,[200],(()=>a(388)));return e=a.O(e)},(()=>{var e=[];a.O=(t,n,r,o)=>{if(!n){var i=1/0;for(m=0;m<e.length;m++){n=e[m][0],r=e[m][1],o=e[m][2];for(var s=!0,c=0;c<n.length;c++)(!1&o||i>=o)&&Object.keys(a.O).every((e=>a.O[e](n[c])))?n.splice(c--,1):(s=!1,o<i&&(i=o));if(s){e.splice(m--,1);var l=r();void 0!==l&&(t=l)}}return t}o=o||0;for(var m=e.length;m>0&&e[m-1][2]>o;m--)e[m]=e[m-1];e[m]=[n,r,o]}})(),a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>"static/js/"+e+".d42d81b7.chunk.js",a.miniCssF=e=>{},a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),a.p="/",(()=>{var e={388:1};a.f.i=(t,n)=>{e[t]||importScripts(a.p+a.u(t))};var t=self.webpackChunkrunelogs=self.webpackChunkrunelogs||[],n=t.push.bind(t);t.push=t=>{var r=t[0],o=t[1],i=t[2];for(var s in o)a.o(o,s)&&(a.m[s]=o[s]);for(i&&i(a);r.length;)e[r.pop()]=1;n(t)}})(),(()=>{var e=a.x;a.x=()=>a.e(200).then(e)})();a.x()})();
//# sourceMappingURL=388.08aaba8b.chunk.js.map